
  🏗️ JavaScript 클래스 기초

  클래스가 뭔가요?

  클래스는 **"객체를 만드는 설계도"** 라고 생각하면 돼요!

  비유:
  - 클래스 = 붕어빵 틀 🧁
  - 객체(인스턴스) = 실제 붕어빵들

  ---
  1. 클래스 없이 객체 만들기 (옛날 방식)

  ```js
  // 사용자 객체 여러 개 만들기
  const user1 = {
    name: '홍길동',
    age: 25,
    greet: function() {
      console.log(`안녕하세요, ${this.name}입니다!`);
    }
  };

  const user2 = {
    name: '김철수',
    age: 30,
    greet: function() {
      console.log(`안녕하세요, ${this.name}입니다!`);
    }
  };

  user1.greet(); // 안녕하세요, 홍길동입니다!
  user2.greet(); // 안녕하세요, 김철수입니다!
```
  문제점: 같은 코드를 계속 반복해야 함 😱

  ---
  2. 클래스로 객체 만들기 (모던 방식)
```js
  // User 클래스 정의 (설계도)
  class User {
    // 생성자: 객체를 만들 때 실행되는 함수
    constructor(name, age) {
      this.name = name;  // this = 지금 만들어지는 객체
      this.age = age;
    }

    // 메서드: 객체가 할 수 있는 행동
    greet() {
      console.log(`안녕하세요, ${this.name}입니다!`);
    }

    getAge() {
      return `저는 ${this.age}살입니다.`;
    }
  }

  // 클래스로 객체 만들기 (인스턴스 생성)
  const user1 = new User('홍길동', 25);
  const user2 = new User('김철수', 30);

  user1.greet(); // 안녕하세요, 홍길동입니다!
  user2.greet(); // 안녕하세요, 김철수입니다!

  console.log(user1.getAge()); // 저는 25살입니다.
  console.log(user2.getAge()); // 저는 30살입니다.
```
  장점: 한 번 만들어놓으면 계속 재사용! ✨

  ---
  3. 클래스 구조 자세히 보기
```js
  class Car {
    // 👈 생성자: new Car() 할 때 실행됨
    constructor(brand, color) {
      this.brand = brand;    // 속성(프로퍼티) 설정
      this.color = color;
      this.speed = 0;        // 기본값 설정
    }

    // 👈 메서드들: 객체가 할 수 있는 행동
    start() {
      console.log(`${this.brand} 자동차 시동을 걸었습니다!`);
    }

    accelerate(amount) {
      this.speed += amount;
      console.log(`속도가 ${this.speed}km/h로 증가했습니다.`);
    }

    brake() {
      this.speed = 0;
      console.log('브레이크를 밟았습니다. 정지!');
    }

    getInfo() {
      return `${this.color} ${this.brand}, 현재 속도: ${this.speed}km/h`;
    }
  }

  // 사용해보기
  const myCar = new Car('현대', '빨간색');

  console.log(myCar.brand);  // 현대
  console.log(myCar.color);  // 빨간색
  console.log(myCar.speed);  // 0

  myCar.start();             // 현대 자동차 시동을 걸었습니다!
  myCar.accelerate(50);      // 속도가 50km/h로 증가했습니다.
  myCar.accelerate(30);      // 속도가 80km/h로 증가했습니다.
  console.log(myCar.getInfo()); // 빨간색 현대, 현재 속도: 80km/h
  myCar.brake();             // 브레이크를 밟았습니다. 정지!
```
  ---
  4. this가 뭔가요?

  this는 **"지금 이 객체"** 를 가리키는 키워드예요.
```js
  class Person {
    constructor(name) {
      this.name = name;  // 👈 this = 지금 만들어지는 객체
    }

    introduce() {
      console.log(`제 이름은 ${this.name}입니다.`); // 👈 this = 이 메서드를 호출한
  객체
    }
  }

  const person1 = new Person('홍길동');
  const person2 = new Person('김철수');

  person1.introduce(); // 👈 여기서 this = person1
  person2.introduce(); // 👈 여기서 this = person2

  결과:
  제 이름은 홍길동입니다.  (person1.introduce에서 this.name = '홍길동')
  제 이름은 김철수입니다.  (person2.introduce에서 this.name = '김철수')
```
  ---
  5. 에러 클래스 만들어보기 (server.js 스타일)

  이제 아까 본 에러 클래스를 이해해봅시다!
```js
  // 기본 Error 클래스를 확장
  class AppError extends Error {
    constructor(message, statusCode) {
      super(message);                    // 👈 부모 클래스(Error)의 생성자 호출
      this.statusCode = statusCode;      // 👈 HTTP 상태 코드 추가
      this.isOperational = true;         // 👈 예상 가능한 에러인지 표시
    }
  }

  // 사용해보기
  const error1 = new AppError('사용자를 찾을 수 없습니다', 404);
  const error2 = new AppError('권한이 없습니다', 403);

  console.log(error1.message);        // 사용자를 찾을 수 없습니다
  console.log(error1.statusCode);     // 404
  console.log(error1.isOperational);  // true

  console.log(error2.message);        // 권한이 없습니다
  console.log(error2.statusCode);     // 403
```
  ---
  6. 실전 예시 - 간단한 API 응답 클래스
```js
  class APIResponse {
    constructor(success, data, message) {
      this.success = success;
      this.data = data;
      this.message = message;
      this.timestamp = new Date().toISOString();
    }

    // 성공 응답 만들기
    static success(data, message = 'Success') {
      return new APIResponse(true, data, message);
    }

    // 에러 응답 만들기
    static error(message, data = null) {
      return new APIResponse(false, data, message);
    }

    // JSON으로 변환
    toJSON() {
      return {
        success: this.success,
        data: this.data,
        message: this.message,
        timestamp: this.timestamp
      };
    }
  }

  // Express에서 사용
  app.get('/users/:id', (req, res) => {
    try {
      const userId = req.params.id;

      if (userId === '999') {
        const errorResponse = APIResponse.error('사용자를 찾을 수 없습니다');
        return res.status(404).json(errorResponse.toJSON());
      }

      const user = { id: userId, name: `사용자${userId}` };
      const successResponse = APIResponse.success(user, '사용자 조회 성공');

      res.json(successResponse.toJSON());

    } catch (error) {
      const errorResponse = APIResponse.error('서버 에러가 발생했습니다');
      res.status(500).json(errorResponse.toJSON());
    }
  });
```
  결과:
  # 성공
  curl "http://localhost:9000/users/123"
  # {
  #   "success": true,
  #   "data": {"id": "123", "name": "사용자123"},
  #   "message": "사용자 조회 성공",
  #   "timestamp": "2024-01-01T12:00:00.000Z"
  # }

  # 에러
  curl "http://localhost:9000/users/999"
  # {
  #   "success": false,
  #   "data": null,
  #   "message": "사용자를 찾을 수 없습니다",
  #   "timestamp": "2024-01-01T12:00:00.000Z"
  # }

  ---
  7. static 메서드가 뭔가요?

  static 메서드는 클래스 자체에서 호출하는 메서드예요.
```js
  class MathHelper {
    // 일반 메서드 (인스턴스 필요)
    constructor(number) {
      this.number = number;
    }

    square() {
      return this.number * this.number;
    }

    // static 메서드 (인스턴스 불필요)
    static add(a, b) {
      return a + b;
    }

    static multiply(a, b) {
      return a * b;
    }
  }

  // 일반 메서드 사용
  const math = new MathHelper(5);
  console.log(math.square()); // 25

  // static 메서드 사용 (new 없이 바로 호출)
  console.log(MathHelper.add(3, 4));      // 7
  console.log(MathHelper.multiply(2, 6)); // 12
```
  ---
  8. 상속 (extends)
```js
  // 부모 클래스
  class Animal {
    constructor(name) {
      this.name = name;
    }

    speak() {
      console.log(`${this.name}가 소리를 냅니다.`);
    }
  }

  // 자식 클래스
  class Dog extends Animal {
    constructor(name, breed) {
      super(name);        // 👈 부모 생성자 호출
      this.breed = breed;
    }

    speak() {            // 👈 부모 메서드 오버라이드
      console.log(`${this.name}가 멍멍 짖습니다!`);
    }

    fetch() {            // 👈 새로운 메서드 추가
      console.log(`${this.name}가 공을 가져옵니다.`);
    }
  }

  const dog = new Dog('바둑이', '진돗개');
  dog.speak();  // 바둑이가 멍멍 짖습니다!
  dog.fetch();  // 바둑이가 공을 가져옵니다.
```

  ---
  9. 실습해보기

  간단한 Logger 클래스 만들어보세요:
```js
  class Logger {
    constructor(name) {
      this.name = name;
      this.logs = [];
    }

    info(message) {
      const log = {
        level: 'INFO',
        message: message,
        timestamp: new Date().toISOString(),
        logger: this.name
      };
      this.logs.push(log);
      console.log(`[INFO] ${this.name}: ${message}`);
    }

    error(message) {
      const log = {
        level: 'ERROR',
        message: message,
        timestamp: new Date().toISOString(),
        logger: this.name
      };
      this.logs.push(log);
      console.error(`[ERROR] ${this.name}: ${message}`);
    }

    getLogs() {
      return this.logs;
    }

    clear() {
      this.logs = [];
      console.log(`${this.name} 로그가 초기화되었습니다.`);
    }
  }

  // 사용해보기
  const apiLogger = new Logger('API');
  const dbLogger = new Logger('Database');

  apiLogger.info('사용자 요청 처리 시작');
  apiLogger.error('API 호출 실패');

  dbLogger.info('데이터베이스 연결');
  dbLogger.error('쿼리 실행 실패');

  console.log('API 로그:', apiLogger.getLogs());
  console.log('DB 로그:', dbLogger.getLogs());
```